doctype html
html(ng-app='fscApp' ng-init="voteId=#{voteId}")
    head
        meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no")
        title= title
        link(rel='stylesheet', href='/node_static/stylesheets/vote.css')
        link(rel='stylesheet', href='/node_static/stylesheets/bootstrap/css/bootstrap.css')
        link(rel='stylesheet', href='/node_static/stylesheets/fontawesome/css/font-awesome.min.css')
    body
        .notify
            div(class="messages alert alert-{{ROOT_messageData.globalMsg.type}} {{ROOT_messageData.globalMsg.show ? 'show' : ''}}")
                p(ng-repeat="item in ROOT_messageData.globalMsg.messages" ng-bind="item.msg")

        div.vote(ng-controller="VoteCtrl")
            div.container(ng-show="hasLoding")
                div.row.activity-content
                    div.col-xs-12
                        h2.text-center(ng-bind="vote.voteName")
                        div( ng-repeat="voteQues in vote.voteQuesList")
                            p
                                strong(ng-bind="($index+1)+'.'+voteQues.title + '(' + (voteQues.checkType==1?'单选':'多选') + ')'  ")
                                div(ng-repeat="voteQuesItem in voteQues.voteQuesItemList",
                                    ng-init="itemIndex = $index",
                                    ng-click="itemClick(voteQues,voteQuesItem)",
                                    ng-class="{radio:voteQues.checkType==1,checkbox:voteQues.checkType!=1,active:voteQuesItem.isChecked}")
                                    label
                                        span(ng-bind="(itemIndex+1)+'.'+voteQuesItem.title")
                                        i(ng-class="{'fa pull-right':true,'fa-check-circle-o':voteQues.checkType==1,'fa-check-square-o':voteQues.checkType!=1}")

                div.vote(ng-show="vote.dataStatus!=0")
                    p(class="apply-info" ng-bind="'投票截止时间:'+vote.deadline+',已有'+vote.voteNum+'人参与投票'")
                    button(class="btn btn-warning btn-block",ng-show="vote.dataStatus==1" ng-click="submitVote()" ng-disabled="doSubmit") 提&nbsp;&nbsp;&nbsp;&nbsp;交
                    p(class="alert alert-disabled text-center" ng-show="vote.dataStatus==2||vote.dataStatus==3" ng-bind="vote.dataStatus==2?'已截止':'已投票'")
            div.loading(ng-hide="hasLoding")
                i.fa.fa-spinner.fa-pulse


        script(src='/node_static/bower_components/angular/angular.min.js')
        script(src='/node_static/javascripts/app/ctrl/fsc/vote.js')
        script(src='/node_static/javascripts/app/services/msg.js')


